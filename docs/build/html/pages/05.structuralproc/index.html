

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Structural processing &mdash; micapipe  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinx_tabs/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/mica-pipe_tabs_tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/mica-pipe_colors.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.js"></script>
        <script src="../../_static/sphinx_tabs/tabs.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Microstructural profile covariance" href="../06.microstructproc/index.html" />
    <link rel="prev" title="What’s new?" href="../04.whatsnew/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #261F4A" >
          

          
            <a href="../../index.html" class="icon icon-home"> micapipe
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../01.install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02.whatyouneed/index.html">Usages Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03.execution/index.html">Micapipe usage overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.whatsnew/index.html">What’s new?</a></li>
</ul>
<p class="caption"><span class="caption-text">Processing modules</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Structural processing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#proc-structural">-proc_structural</a></li>
<li class="toctree-l2"><a class="reference internal" href="#proc-freesurfer">-proc_freesurfer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#post-structural">-post_structural</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gd">-GD</a></li>
<li class="toctree-l2"><a class="reference internal" href="#morphology">-Morphology</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../06.microstructproc/index.html">Microstructural profile covariance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07.dwiproc/index.html">Diffusion-weighted imaging processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08.restingstateproc/index.html">Resting-state fMRI processing</a></li>
</ul>
<p class="caption"><span class="caption-text">Quality control</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../15.qc/index.html">Quality control reports</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../16.matrices/index.html">Structure of output matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../17.surfaces/index.html">Surface visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../18_gradients/index.html">Computing gradients from output matrices</a></li>
</ul>
<p class="caption"><span class="caption-text">Additional tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../09.micapipe_anonymize/index.html">Micapipe Anonymize</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10.micapipe_cleanup/index.html">Micapipe Cleanup</a></li>
</ul>
<p class="caption"><span class="caption-text">References &amp; Acknowledgements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../12.citingmicapipe/index.html">Citing micapipe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../13.references/index.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../14.acknowledge/index.html">Acknowlegdements</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">micapipe</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Structural processing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/pages/05.structuralproc/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="structural-processing">
<span id="structproc"></span><h1>Structural processing<a class="headerlink" href="#structural-processing" title="Permalink to this headline">¶</a></h1>
<p>This section describes all structural processing modules, which includes pre-processing and post-processing of T1-weighted images found in the BIDS directory. Structural processing modules perform volumetric (<strong>-proc_structural</strong>) and surface-based (<strong>proc-freesurfer</strong>, <strong>-post_structural</strong>, <strong>-GD</strong>, <strong>-Morphology</strong>) processing. These modules map subject data to several volumetric and surface templates providing several useful structural metrics for further analyses, including geodesic distance matrices mapped to several parcellation schemes as well as vertexwise cortical thickness and curvature data.</p>
<div class="section" id="proc-structural">
<h2>-proc_structural<a class="headerlink" href="#proc-structural" title="Permalink to this headline">¶</a></h2>
<p>This module performs initial structural pre-processing, keeping data in volumetric format. Two main spaces are found in this stream: <em>nativepro</em> as well as <em>MNI152</em>.</p>
<div class="admonition-nativepro admonition">
<p class="admonition-title">Nativepro?! 🤨</p>
<p>Nativepro stands for <strong>native</strong> <strong>pro</strong>cessing space. This denomination is used to distinguish the space occupied by the main scan from standard native space. Indeed, as micapipe supports the alignment and averaging of several distinct T1w acquisitions, we opted to refer to the resulting space using a different term, so not to confuse this space with the native space of each original T1w scan.</p>
</div>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-0-0 docutils container">
<div class="docutils container">
<p>Processing steps</p>
</div>
</div>
<div class="item sphinx-data-tab-0-1 docutils container">
<div class="docutils container">
<p>Usage</p>
</div>
</div>
<div class="item sphinx-data-tab-0-2 docutils container">
<div class="docutils container">
<p>Outputs</p>
</div>
</div>
<div class="item sphinx-data-tab-0-3 docutils container">
<div class="docutils container">
<p>-slim</p>
</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-0-0 active docutils container">
<ul class="simple">
<li><p>Each T1-weighted run is LPI-reoriented, deobliqued, and oriented to standard space (MNI152).</p></li>
<li><p>Create the T1-weighted image used in all downstream processing: T1_nativepro. If multiple T1w scans are found in the raw data, they are aligned to the first run and averaged.</p></li>
<li><p>Intensity non-uniformity correction (N4)</p></li>
<li><p>Intensity rescaling [100,0]</p></li>
<li><p>Create brainmask (FSL-BET)</p></li>
<li><p>Subcortical structure segmentation using FSL FIRST</p></li>
<li><p>Tissue type segmentation (Gray matter, white matter, CSF) using FSL FAST</p></li>
<li><p>Non-linear registration to MNI152 (0.8mm and 2mm resolutions)</p></li>
<li><p>Five-tissue-type image segmentation (5ttgen, used for anatomically constrained tractography)</p></li>
</ul>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-0-1 docutils container">
<pre class="literal-block">$ mica-pipe <strong>-sub</strong> &lt;subject_id&gt; <strong>-out</strong> &lt;outputDirectory&gt; <strong>-bids</strong> &lt;BIDS-directory&gt; <strong>-proc_structural</strong></pre>
<p>Docker command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker -proc_structural
</pre></div>
</div>
<p>Singularity command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ singularity -proc_structural
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-0-2 docutils container">
<p>Directories created or populated by <strong>-proc-structural</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/</span><span class="n">anat</span>
<span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/</span><span class="n">anat</span><span class="o">/</span><span class="n">first</span>
<span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/</span><span class="n">xfms</span>
</pre></div>
</div>
<p>Files generated by <strong>-proc-structural</strong>:</p>
<pre class="literal-block">- Main structural scan: <em>&lt;outputDirectory&gt;/micapipe/anat/&lt;sub&gt;_t1w_&lt;resolution&gt;_nativepro.nii.gz</em>
- Brain extracted main structural scan: <em>&lt;outputDirectory&gt;/micapipe/anat/&lt;sub&gt;_t1w_&lt;resolution&gt;_nativepro_brain.nii.gz</em>
- Brain-mask for main structural scan: <em>&lt;outputDirectory&gt;/micapipe/anat/&lt;sub&gt;_t1w_&lt;resolution&gt;_nativepro_brain_mask.nii.gz</em>
- Main structural scan linearly-registered to MNI152 1mm template, generated during FSL FIRST: <em>&lt;sub&gt;_t1w_1mm_MNI152_brain_affine.nii.gz</em>
- FSL FAST outputs stored in <em>&lt;outputDirectory&gt;/micapipe/anat/</em>:
    - <em>&lt;sub&gt;_t1w_&lt;resolution&gt;_nativepro_brain_seg.nii.gz</em>
    - <em>&lt;sub&gt;_t1w_&lt;resolution&gt;_nativepro_brain_pve_0.nii.gz</em>
    - <em>&lt;sub&gt;_t1w_&lt;resolution&gt;_nativepro_brain_pve_1.nii.gz</em>
    - <em>&lt;sub&gt;_t1w_&lt;resolution&gt;_nativepro_brain_pve_2.nii.gz</em>
    - <em>&lt;sub&gt;_t1w_&lt;resolution&gt;_nativepro_brain_pveseg.nii.gz</em>
    - <em>&lt;sub&gt;_t1w_&lt;resolution&gt;_nativepro_brain_mixeltype.nii.gz</em>
- Main structural scan non-linearly-registered to MNI152:
    - <em>&lt;outputDirectory&gt;/micapipe/anat/&lt;sub&gt;_t1w_0.8mm_MNI152_brain.nii.gz</em>
    - <em>&lt;outputDirectory&gt;/micapipe/anat/&lt;sub&gt;_t1w_2mm_MNI152_brain.nii.gz</em>
- Final 5ttgen output:
    - <em>&lt;outputDirectory&gt;/micapipe/anat/&lt;sub&gt;_t1w_&lt;resolution&gt;_nativepro_5TT.nii.gz</em>
- FSL FIRST intermediary files: <em>&lt;outputDirectory&gt;/micapipe/anat/first/*</em>
- If multiple T1w scans are found in the raw data directory, transformation files to generate nativepro image will generated and stored here: <em>&lt;outputDirectory&gt;/micapipe/xfms/&lt;sub&gt;_t1w_run-2_to_run-1*</em>
- Linear registration to MNI152 generated during FSL FIRST: <em>&lt;outputDirectory&gt;/micapipe/xfms/&lt;sub&gt;_t1w_&lt;resolution&gt;_nativepro_brain_to_1mm_MNI152_brain.mat</em>
- Files generated for non-linear registration to MNI152 2mm template:  <em>&lt;outputDirectory&gt;/micapipe/xfms/&lt;sub&gt;_t1w_&lt;resolution&gt;_nativepro_brain_to_2mm_MNI152_SyN_brain*</em>
- Files generated for non-linear registration to MNI152 0.8mm template: <em>&lt;outputDirectory&gt;/micapipe/xfms/&lt;sub&gt;_t1w_&lt;resolution&gt;_nativepro_brain_to_0.8mm_MNI152_SyN_brain*</em></pre>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-0-3 docutils container">
<p>Files conserved during <strong>-proc-structural</strong> slim run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="o">...</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="proc-freesurfer">
<h2>-proc_freesurfer<a class="headerlink" href="#proc-freesurfer" title="Permalink to this headline">¶</a></h2>
<p>This modules performs cortical surface segmentation from all native T1w acquisitions stored in the subject’s BIDS directory.</p>
<div class="admonition-quality-control admonition">
<p class="admonition-title">Quality control 💅🏻</p>
<p>We recommend that users carefully inspect FreeSurfer-generated cortical surface segmentations. As micapipe relies heavily on surface-based processing, poor segmentation quality may compromise the validity of downstream results. FreeSurfer provides comprehensive tutorials for manual correction of surface segmentations: See tutorials <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki/FsTutorial/ControlPoints_freeview">here</a>, <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki/FsTutorial/WhiteMatterEdits_freeview">here</a>, and <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki/FsTutorial/PialEdits_freeview">here</a> explaining different types of corrections that can be applied to cortical surfaces.</p>
</div>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-1-0 docutils container">
<div class="docutils container">
<p>Processing steps</p>
</div>
</div>
<div class="item sphinx-data-tab-1-1 docutils container">
<div class="docutils container">
<p>Usage</p>
</div>
</div>
<div class="item sphinx-data-tab-1-2 docutils container">
<div class="docutils container">
<p>Outputs</p>
</div>
</div>
<div class="item sphinx-data-tab-1-3 docutils container">
<div class="docutils container">
<p>-slim</p>
</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-1-0 active docutils container">
<ul class="simple">
<li><p>Run FreeSurfer’s recon-all pipeline will all T1-weighted scans found in raw data directory</p></li>
</ul>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-1-1 docutils container">
<pre class="literal-block">$ mica-pipe <strong>-sub</strong> &lt;subject_id&gt; <strong>-out</strong> &lt;outputDirectory&gt; <strong>-bids</strong> &lt;BIDS-directory&gt; <strong>-proc_freesurfer</strong> &lt;options&gt;</pre>
<p>Docker command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker -proc_freesurfer -&lt;options&gt;
</pre></div>
</div>
<p>Singularity command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ singularity -proc_freesurfer -&lt;options&gt;
</pre></div>
</div>
<p>Options:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-freesurfer_dir</span> <span class="pre">&lt;path&gt;</span></code> will copy existing FreeSurfer outputs in the provided path to the appropriate location. This way, if the cortical segmentations of your dataset have already been quality controlled, results can be easily integrated within the pipeline’s directory structure.</p></li>
</ul>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-1-2 docutils container">
<p>Directories created or populated by <strong>-proc-freesurfer</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">freesurfer</span><span class="o">/&lt;</span><span class="n">sub</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Files generated by <strong>-proc-freesurfer</strong>:</p>
<pre class="literal-block">- A list of all recon-all output files can be found <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki/ReconAllOutputFiles">here</a>.</pre>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-1-3 docutils container">
<p>Files conserved during <strong>-proc-freesurfer</strong> slim run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="o">...</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="post-structural">
<h2>-post_structural<a class="headerlink" href="#post-structural" title="Permalink to this headline">¶</a></h2>
<p>This first structural post-processing module registers native FreeSurfer-space cortical surfaces to a standard template, in addition to mapping all cortical parcellation schemes to the subject’s native surface space and volumetric nativepro space.</p>
<div class="admonition-prerequisites admonition">
<p class="admonition-title">Prerequisites 🖐🏼</p>
<p>You need to run <strong>proc_structural</strong> and <strong>proc_freesurfer</strong> before this stage</p>
</div>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-2-0 docutils container">
<div class="docutils container">
<p>Processing steps</p>
</div>
</div>
<div class="item sphinx-data-tab-2-1 docutils container">
<div class="docutils container">
<p>Usage</p>
</div>
</div>
<div class="item sphinx-data-tab-2-2 docutils container">
<div class="docutils container">
<p>Outputs</p>
</div>
</div>
<div class="item sphinx-data-tab-2-3 docutils container">
<div class="docutils container">
<p>-slim</p>
</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-2-0 active docutils container">
<ul class="simple">
<li><p>Compute affine registration from native FreeSurfer space to nativepro space</p></li>
<li><p>Register cerebellar atlas (MNI152) to subject’s nativepro space using affine transformation</p></li>
<li><p>Perform surface-based registration of fsaverage5 annotation labels to native surface</p></li>
<li><p>Register native surface parcellations to native FreeSurfer volume</p></li>
<li><p>Apply linear registrations to bring volumetric parcellations to nativepro space</p></li>
<li><p>Build conte69-32k sphere and resample white and pial surfaces to conte69-32k template</p></li>
<li><p>Create midthickness surface from native surface and resampled conte69-32k template</p></li>
</ul>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-2-1 docutils container">
<pre class="literal-block">$ mica-pipe <strong>-sub</strong> &lt;subject_id&gt; <strong>-out</strong> &lt;outputDirectory&gt; <strong>-bids</strong> &lt;BIDS-directory&gt; <strong>-post_structural</strong></pre>
<p>Docker command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker -post_structural
</pre></div>
</div>
<p>Singularity command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ singularity -post_structural
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-2-2 docutils container">
<p>Directories created or populated by <strong>-post-structural</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/</span><span class="n">anat</span>
<span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/</span><span class="n">anat</span><span class="o">/</span><span class="n">surfaces</span><span class="o">/</span><span class="n">conte69</span>
<span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/</span><span class="n">anat</span><span class="o">/</span><span class="n">surfaces</span><span class="o">/</span><span class="n">label</span>
<span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/</span><span class="n">anat</span><span class="o">/</span><span class="n">volumetric</span>
<span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/</span><span class="n">xfms</span>
</pre></div>
</div>
<p>Files generated by <strong>-post-structural</strong>:</p>
<pre class="literal-block">- Main structural scan in FreeSurfer space: <em>&lt;outputDirectory&gt;/micapipe/anat/&lt;sub&gt;_t1w_XXmm_fsspace.nii.gz</em>
- Surface files formatted for Conte69 transformations, stored in &lt;outputDirectory&gt;/micapipe/anat/surfaces/conte69:
    - Subject's pial surface resampled to Conte69 32k-vertex template: <em>&lt;sub&gt;_&lt;hemi&gt;_pial_32k_fs_LR.surf.gii</em>
    - Subject's white matter surface resampled to Conte69 32k-vertex template: <em>&lt;sub&gt;_&lt;hemi&gt;_white_32k_fs_LR.surf.gii</em>
    - Subject's midsurface resampled to Conte69 32k-vertex template: <em>&lt;sub&gt;_&lt;hemi&gt;_midthickness_32k_fs_LR.surf.gii</em>
    - Subject's surface sphere resampled to Conte69 32k-vertex template: <em>&lt;sub&gt;_&lt;hemi&gt;_sphereReg.surf.gii</em>
    - Subject's native surface converted to GIFTI format: <em>&lt;hemi&gt;.pial.surf.gii</em>, <em>&lt;hemi&gt;.white.surf.gii</em>
- Native surface mapped annotation labels: <em>&lt;outputDirectory&gt;/micapipe/anat/surfaces/&lt;sub&gt;/labels/&lt;hemi&gt;.&lt;parcellation&gt;_mics.annot</em>
- Volumetric parcellation files: <em>&lt;outputDirectory&gt;/micapipe/anat/volumetric/&lt;sub&gt;_t1w_0.8mm_nativepro_&lt;parcellation&gt;.nii.gz</em>
- Files generated for non-linear registration between native FreeSurfer space and nativepro: <em>&lt;outputDirectory&gt;/micapipe/xfms/&lt;sub&gt;_t1w_XXmm_fsspace_to_nativepro*</em></pre>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-2-3 docutils container">
<p>Files conserved during <strong>-post-structural</strong> slim run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="o">...</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="gd">
<h2>-GD<a class="headerlink" href="#gd" title="Permalink to this headline">¶</a></h2>
<p>This module calculates geodesic distance between all cortical parcels from the subject’s native midsurface mesh. with</p>
<div class="admonition-prerequisites admonition">
<p class="admonition-title">Prerequisites 🖐🏼</p>
<p>You need to run <strong>proc_structural</strong>, <strong>proc_freesurfer</strong>, and <strong>post_structural</strong> before this stage</p>
</div>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-3-0 docutils container">
<div class="docutils container">
<p>Processing steps</p>
</div>
</div>
<div class="item sphinx-data-tab-3-1 docutils container">
<div class="docutils container">
<p>Usage</p>
</div>
</div>
<div class="item sphinx-data-tab-3-2 docutils container">
<div class="docutils container">
<p>Outputs</p>
</div>
</div>
<div class="item sphinx-data-tab-3-3 docutils container">
<div class="docutils container">
<p>-slim</p>
</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-3-0 active docutils container">
<ul class="simple">
<li><p>Identifies centre vertex for each parcel, based on the vertex with the shortest summed euclidean distance to all other vertices in the same parcel</p></li>
<li><p>Calculate geodesic distance from centre vertex to all other vertices on the midsurface mesh using <a class="reference external" href="https://www.humanconnectome.org/software/workbench-command/-surface-geodesic-distance">workbench -surface-geodesic-distance</a></p></li>
<li><p>Average computed distances within parcels</p></li>
</ul>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-3-1 docutils container">
<pre class="literal-block">$ mica-pipe <strong>-sub</strong> &lt;subject_id&gt; <strong>-out</strong> &lt;outputDirectory&gt; <strong>-bids</strong> &lt;BIDS-directory&gt; <strong>-GD</strong></pre>
<p>Docker command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker -GD
</pre></div>
</div>
<p>Singularity command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ singularity -GD
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-3-2 docutils container">
<p>Directories created or populated by <strong>-GD</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/</span><span class="n">anat</span><span class="o">/</span><span class="n">surfaces</span><span class="o">/</span><span class="n">geo_dist</span><span class="o">/</span>
</pre></div>
</div>
<p>Files generated by <strong>-GD</strong>:</p>
<pre class="literal-block">- Square matrix of average parcel-to-parcel geodesic distances: <em>&lt;sub&gt;_&lt;parcellation&gt;_GD.txt</em></pre>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-3-3 docutils container">
<p>Files conserved during <strong>-GD</strong> slim run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="morphology">
<h2>-Morphology<a class="headerlink" href="#morphology" title="Permalink to this headline">¶</a></h2>
<p>Here, surface-based morphological features are registered and smoothed on two distinct templates.</p>
<div class="admonition-prerequisites admonition">
<p class="admonition-title">Prerequisites 🖐🏼</p>
<p>You need to run <strong>proc_structural</strong>, <strong>proc_freesurfer</strong>, and <strong>post_structural</strong> before this stage</p>
</div>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-4-0 docutils container">
<div class="docutils container">
<p>Processing steps</p>
</div>
</div>
<div class="item sphinx-data-tab-4-1 docutils container">
<div class="docutils container">
<p>Usage</p>
</div>
</div>
<div class="item sphinx-data-tab-4-2 docutils container">
<div class="docutils container">
<p>Outputs</p>
</div>
</div>
<div class="item sphinx-data-tab-4-3 docutils container">
<div class="docutils container">
<p>-slim</p>
</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-4-0 active docutils container">
<ul class="simple">
<li><p>Register cortical thickness and curvature to fsaverage5 and conte69 templates</p></li>
<li><p>Apply 10mm gaussian smooth on template-mapped outputs</p></li>
</ul>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-4-1 docutils container">
<pre class="literal-block">$ mica-pipe <strong>-sub</strong> &lt;subject_id&gt; <strong>-out</strong> &lt;outputDirectory&gt; <strong>-bids</strong> &lt;BIDS-directory&gt; <strong>-Morphology</strong></pre>
<p>Docker command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker -Morphology
</pre></div>
</div>
<p>Singularity command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ singularity -Morphology
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-4-2 docutils container">
<p>Directories created or populated by <strong>-Morphology</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="o">&lt;</span><span class="n">outputDirectory</span><span class="o">&gt;/</span><span class="n">micapipe</span><span class="o">/</span><span class="n">anat</span><span class="o">/</span><span class="n">surfaces</span><span class="o">/</span><span class="n">morphology</span><span class="o">/</span>
</pre></div>
</div>
<p>Files generated by <strong>-Morphology</strong>:</p>
<pre class="literal-block">- Native surface space cortical thickness and curvature: <em>&lt;hemi&gt;_&lt;metric&gt;.mgh</em>
- Unsmoothed fsaverage5-mapped cortical thickness and curvature: <em>&lt;hemi&gt;_&lt;metric&gt;_fsa5.mgh</em>
- Smoothed fsaverage5-mapped cortical thickness and curvature: <em>&lt;hemi&gt;_&lt;metric&gt;_10mm_fsa5.mgh</em>
- Unsmoothed Conte69-mapped cortical thickness and curvature: <em>&lt;hemi&gt;_&lt;metric&gt;_c69-32k.mgh</em>
- Smoothed Conte69-mapped cortical thickness and curvature: <em>&lt;hemi&gt;_&lt;metric&gt;_10mm_c69-32k.mgh</em></pre>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-4-3 docutils container">
<p>Files conserved during <strong>-Morphology</strong> slim run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="o">...</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../06.microstructproc/index.html" class="btn btn-neutral float-right" title="Microstructural profile covariance" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../04.whatsnew/index.html" class="btn btn-neutral float-left" title="What’s new?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, micapipe

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a 
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a> and modified by SL and RRC 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    

  <style>
         .wy-nav-content { max-width: none; }
  </style>


  <footer>
    
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a 
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. Modified by SL 🤠 

  </footer>



</body>
</html>